#!/usr/bin/env fish

set port $argv[1]

if test -z $argv[1]
    echo "Usage: $(basename (status -f)) <port>"
    exit 1
end

set pid (lsof -ti :"$port")

if test -z "$pid"
    echo "No process is listening on port $port"
    exit 1
end

echo "Killing process: $pid"
kill -9 "$pid"
echo "Killed process: $pid listening on port $port"
